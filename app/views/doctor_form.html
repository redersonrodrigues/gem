{% extends 'base.html' %}
{% block title %}Cadastro de Médicos{% endblock %}
{% block content %}
<h2>Cadastro de Médicos</h2>
<form method="POST" action="/doctors">
    <div class="form-group">
        <label for="doctorName">Nome do Médico</label>
        <input type="text" class="form-control" id="doctorName" name="name" placeholder="Digite o nome do médico" required style="text-transform: uppercase;">
    </div>
    <div class="form-group">
        <label for="fantasyName">Nome Fantasia</label>
        <input type="text" class="form-control" id="fantasyName" name="fantasy_name" placeholder="Digite o nome fantasia" required style="text-transform: uppercase;">
    </div>
    <div class="form-group">
        <label for="specializations">Especializações</label>
        <select class="form-control" id="specializations" name="specializations" multiple required>
            {% for specialization in specializations %}
            <option value="{{ specialization.id }}">{{ specialization.name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-primary">Salvar</button>
        <a href="/" class="btn btn-secondary">Voltar</a>
    </div>
</form>

<!-- Tabela de Médicos -->
<table class="table table-bordered table-striped">
    <thead class="bg-primary text-white">
        <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Nome Fantasia</th>
            <th>Especializações</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
        {% for doctor in doctors %}
        <tr>
            <td>{{ doctor.id }}</td>
            <td>{{ doctor.name }}</td>
            <td>{{ doctor.fantasy_name }}</td>
            <td>
                {% for specialization in doctor.specializations %}
                {{ specialization.name }}{% if not loop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td>
                <a href="/doctors/edit/{{ doctor.id }}" class="btn btn-warning btn-sm">
                    <i class="fas fa-edit"></i>
                </a>
                <form action="/doctors/delete/{{ doctor.id }}" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger btn-sm">
                        <i class="fas fa-trash"></i>
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}